<svg width="800" height="600" xmlns="http://www.w3.org/2000/svg">
  <title>Nav2 Architecture</title>
  <desc>Architecture diagram showing costmaps and planners in Nav2</desc>

  <!-- Background -->
  <rect width="100%" height="100%" fill="#f8f9fa"/>

  <!-- Title -->
  <text x="400" y="40" font-family="Arial" font-size="20" text-anchor="middle" fill="#212529">
    Nav2 Architecture - Costmaps and Planners
  </text>

  <!-- Navigation Server -->
  <rect x="300" y="80" width="200" height="60" fill="#007bff" stroke="#0056b3" stroke-width="2" rx="10"/>
  <text x="400" y="115" font-family="Arial" font-size="14" text-anchor="middle" fill="white">
    Navigation Server
  </text>

  <!-- Costmap 2D -->
  <rect x="150" y="180" width="500" height="120" fill="#e9ecef" stroke="#6c757d" stroke-width="2" rx="10"/>
  <text x="400" y="200" font-family="Arial" font-size="14" text-anchor="middle" fill="#212529" font-weight="bold">
    Costmap 2D
  </text>

  <!-- Costmap Layers -->
  <rect x="180" y="220" width="140" height="50" fill="#28a745" stroke="#1e7e34" stroke-width="2" rx="8"/>
  <text x="250" y="250" font-family="Arial" font-size="10" text-anchor="middle" fill="white">
    Static Layer
  </text>

  <rect x="340" y="220" width="140" height="50" fill="#ffc107" stroke="#d39e00" stroke-width="2" rx="8"/>
  <text x="410" y="250" font-family="Arial" font-size="10" text-anchor="middle" fill="#212529">
    Obstacle Layer
  </text>

  <rect x="500" y="220" width="140" height="50" fill="#17a2b8" stroke="#117a8b" stroke-width="2" rx="8"/>
  <text x="570" y="250" font-family="Arial" font-size="10" text-anchor="middle" fill="white">
    Inflation Layer
  </text>

  <!-- Planner Server -->
  <rect x="200" y="340" width="200" height="60" fill="#dc3545" stroke="#c82333" stroke-width="2" rx="10"/>
  <text x="300" y="375" font-family="Arial" font-size="14" text-anchor="middle" fill="white">
    Planner Server
  </text>

  <!-- Controller Server -->
  <rect x="450" y="340" width="200" height="60" fill="#6f42c1" stroke="#5a32a3" stroke-width="2" rx="10"/>
  <text x="550" y="375" font-family="Arial" font-size="14" text-anchor="middle" fill="white">
    Controller Server
  </text>

  <!-- Recovery Server -->
  <rect x="325" y="440" width="150" height="50" fill="#fd7e14" stroke="#e06b0d" stroke-width="2" rx="8"/>
  <text x="400" y="470" font-family="Arial" font-size="12" text-anchor="middle" fill="white">
    Recovery Server
  </text>

  <!-- Sensor Integration -->
  <rect x="100" y="440" width="150" height="50" fill="#20c997" stroke="#159c70" stroke-width="2" rx="8"/>
  <text x="175" y="470" font-family="Arial" font-size="10" text-anchor="middle" fill="white">
    Sensor Integration
  </text>

  <rect x="600" y="440" width="150" height="50" fill="#6c757d" stroke="#495057" stroke-width="2" rx="8"/>
  <text x="675" y="470" font-family="Arial" font-size="10" text-anchor="middle" fill="white">
    Localization
  </text>

  <!-- Example Costmap Visualization -->
  <rect x="100" y="520" width="600" height="60" fill="#f8f9fa" stroke="#6c757d" stroke-width="1"/>
  <text x="400" y="540" font-family="Arial" font-size="10" text-anchor="middle" fill="#212529">
    Costmap Visualization: Green=Free Space, Yellow=Unknown, Red=Occupied, Gray=Inflated
  </text>

  <!-- Costmap cells example -->
  <rect x="120" y="550" width="15" height="15" fill="green"/>
  <rect x="135" y="550" width="15" height="15" fill="green"/>
  <rect x="150" y="550" width="15" height="15" fill="yellow"/>
  <rect x="165" y="550" width="15" height="15" fill="red"/>
  <rect x="180" y="550" width="15" height="15" fill="gray"/>
  <rect x="195" y="550" width="15" height="15" fill="red"/>
  <rect x="210" y="550" width="15" height="15" fill="yellow"/>
  <rect x="225" y="550" width="15" height="15" fill="green"/>
  <rect x="240" y="550" width="15" height="15" fill="green"/>

  <!-- Arrows showing data flow -->
  <line x1="400" y1="140" x2="400" y2="180" stroke="#212529" stroke-width="2" marker-end="url(#arrow)"/>
  <line x1="400" y1="300" x2="300" y2="340" stroke="#212529" stroke-width="2" marker-end="url(#arrow)"/>
  <line x1="400" y1="300" x2="550" y2="340" stroke="#212529" stroke-width="2" marker-end="url(#arrow)"/>
  <line x1="300" y1="400" x2="400" y2="440" stroke="#212529" stroke-width="2" marker-end="url(#arrow)"/>
  <line x1="550" y1="400" x2="400" y2="440" stroke="#212529" stroke-width="2" marker-end="url(#arrow)"/>
  <line x1="175" y1="440" x2="200" y2="370" stroke="#212529" stroke-width="1" stroke-dasharray="5,5"/>
  <line x1="675" y1="440" x2="650" y2="370" stroke="#212529" stroke-width="1" stroke-dasharray="5,5"/>

  <!-- Arrow marker definition -->
  <defs>
    <marker id="arrow" markerWidth="10" markerHeight="10" refX="9" refY="3" orient="auto" markerUnits="strokeWidth">
      <path d="M0,0 L0,6 L9,3 z" fill="#212529"/>
    </marker>
  </defs>
</svg>